来自于2023年5月14日的设计思路

让Controller作为协调器，例如，处理"创建订单"请求的Controller方法可能需要调用OrderService的方法来创建订单，然后调用InventoryService的方法来更新库存，最后调用PaymentService的方法来处理支付。

在这种设计中，Service类成员方法就像是对于Mapper方法的包装，例如UserService.addUser()，而不是类似于UserService.register()。

| 方法签名 | 描述 |
| -------- | ---- |
|          |      |

# New New Service Design

## UserService

| 方法签名                                                     | 描述                                        |
| ------------------------------------------------------------ | ------------------------------------------- |
| public String authenticateUser(VerifyUserLoginRequest verifyUserLoginRequest) throws UserException; | 验证用户输入的用户名和密码，并生成token     |
| public String authenticateAdmin(VerifyAdminLoginRequest verifyAdminLoginRequest) throws UserException; | 验证管理员输入的用户名和密码，并生成token   |
| public int getUserIdFromToken(String token) throws UserException; | 验证提供的token是否有效，并返回相应的UserId |
| public boolean addUser(VerifyUserRegisterRequest verifyUserRegisterRequest) throws UserException; | 创建新的用户                                |
|                                                              | 获取用户信息                                |
|                                                              | 修改用户密码                                |
|                                                              | 获取用户列表                                |
|                                                              | 更新用户信息                                |
|                                                              | 删除用户                                    |
|                                                              | 获取用户总体统计数据                        |

## LogService

| 方法签名 | 描述                     |
| -------- | ------------------------ |
|          | 添加一条新的登陆记录     |
|          | 删除某个日期之前所有记录 |
|          | 获取登录总体统计数据     |

## PostService

| 方法签名 | 描述                 |
| -------- | -------------------- |
|          | 按页获取帖子列表     |
|          | 添加新帖子           |
|          | 删除帖子             |
|          | 获取帖子详细信息     |
|          | 获取帖子总体统计数据 |

## LikeService

| 方法签名 | 描述                                                         |
| -------- | ------------------------------------------------------------ |
|          | 用户点赞时，添加新的点赞关系                                 |
|          | 用户取消点赞时，删除点赞关系                                 |
|          | 获取对应帖子点赞数目                                         |
|          | 获取相应用户对相应帖子的是否点赞，用于帖子显示，扣除积分，点赞/取消时的检查 |
|          | 获取点赞总体统计数据                                         |

## CommentService

删除帖子时使用级联删除的方式删除评论。

| 方法签名 | 描述                                   |
| -------- | -------------------------------------- |
|          | 添加新的评论                           |
|          | 删除某条评论，注意检查评论是否属于用户 |
|          | 获取对应帖子在相对位置的几条评论       |
|          | 删除对应帖子的全部评论，用于评论删除   |
|          | 获取评论总体统计数据                   |

## ReplyService

删除帖子或评论时使用级联删除删除相应回复。

| 方法签名 | 描述                                               |
| -------- | -------------------------------------------------- |
|          | 添加新的回复                                       |
|          | 删除相应的回复                                     |
|          | 获取对应帖子对应评论的前几条回复                   |
|          | 获取对应帖子对应评论的全部回复                     |
|          | 删除对应帖子对应评论的全部回复，用于帖子删除       |
|          | @重载 删除对应帖子对应评论的全部回复，用于评论删除 |
|          | 获取回复总体统计数据                               |

## RecourseService

| 方法签名 | 描述                 |
| -------- | -------------------- |
|          | 获取推荐资源列表     |
|          | 按类搜索资源         |
|          | 添加新资源           |
|          | 删除资源             |
|          | 下载资源             |
|          | 获取资源详情         |
|          | 获取资源总体统计数据 |
|          | 获取资源按类统计数据 |

## DownloadHistoryService

| 方法签名 | 描述                     |
| -------- | ------------------------ |
|          | 按页获取下载历史         |
|          | 清空下载历史             |
|          | 获取下载历史相关统计数据 |

## StatisticsService

| 方法签名 | 描述             |
| -------- | ---------------- |
|          | 按类获取统计数据 |

## ExperienceService

| 方法签名 | 描述                               |
| -------- | ---------------------------------- |
|          | 为相应用户增加/扣除积分            |
|          | 获取相应用户的等级                 |
|          | 检查相应用户是否有权查看某帖子内容 |